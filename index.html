<!DOCTYPE html>
<script>
    moveArray = [`rock`,`paper`,`scissors`];
    // const playerSelection = `scissors`;
    // const computerSelection = computerPlay();

    function playerPlay(){
        playerSelection = prompt(`Choose a move:`);
        return playerSelection.toLowerCase();
    }

    function computerPlay(){
        let randomMove = moveArray[Math.floor(Math.random() * moveArray.length)];
        return randomMove;
    }

    function scoreKeeper(winner, score){
        if (winner===`player`){
            score[0] = score[0] + 1;
            return score;
        } else if (winner===`computer`){
            score[1] = score[1] + 1;
            return score;
        }
        else{
            score[2] = score[2] + 1;
            return score;
        }
    }

    function finalWinner(score){
        // outputs final winner (player or computer or tie):
        if (score[0]===score[1]){
            console.log(`The game is a tie`);
        } else if (score[0]>score[1]){
            console.log(`The winner of the game is player.`);
        } else {
            console.log(`The winner of the game is computer`);
        }
    }

    function playRound(playerSelection, computerSelection){
        // returns player if player wins, computer if player loses, tie if tied
        if (playerSelection === computerSelection){
            console.log(`It's a tie, both selected ${playerSelection}`);
            return `tie`
        } else if (playerSelection === `rock`){
            if (computerSelection === `paper`){
                console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                return `computer`;
            } else {
                console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                return `player`;
            }
        } else if (playerSelection === `paper`){
            if (computerSelection === 'scissors'){
                console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                return `computer`;
            } else {
                console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                return `player`;
            }
        } else if (playerSelection === `scissors`){
            if (computerSelection === 'rock'){
                console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                return `computer`;
            } else {
                console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                return `player`;
            }   
        }
    }

    function game(){
        // 5 round game
        let winner;
        let score=[0,0,0];
        for (i=1; i<=5; i++){
            playerSelection = playerPlay();
            computerSelection = computerPlay();
            winner = playRound(playerSelection, computerSelection);
            score = scoreKeeper(winner, score)
        }
        console.log(`The final score is ${score[0]}-${score[1]}-${score[2]}`);
        finalWinner(score);
    }
</script>